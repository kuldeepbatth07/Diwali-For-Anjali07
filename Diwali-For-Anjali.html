<!doctype html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Diwali ‚Äî Meri Anjali ‚ù§Ô∏è</title>
  <style>
    :root{--bg1:#05021a;--bg2:#120428;--accent:#ffcf6b;--pink:#ff6b9a;--white:#fff}
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,'Noto Sans',Helvetica,Arial}
    body{overflow:hidden;background:linear-gradient(180deg,var(--bg1),var(--bg2));color:var(--white)}

    /* SKY + STARS + MOVING CLOUDS (parallax) */
    .sky{position:fixed;inset:0;z-index:0;pointer-events:none}
    .stars{width:100%;height:100%;background-image:radial-gradient(2px 2px at 10% 20%,rgba(255,255,255,0.9),transparent),
      radial-gradient(1px 1px at 40% 10%,rgba(255,255,255,0.8),transparent),
      radial-gradient(1.5px 1.5px at 70% 30%,rgba(255,255,255,0.85),transparent);
      background-size:cover;filter:drop-shadow(0 0 6px rgba(255,255,255,0.05));}
    .clouds{position:absolute;left:-20%;top:10%;width:140%;height:60%;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));opacity:0.5;mix-blend-mode:screen;animation:clouds 40s linear infinite}
    @keyframes clouds{0%{transform:translateX(0)}100%{transform:translateX(-20%)}}

    /* Center stage */
    .stage{position:relative;z-index:5;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:28px}
    .card{width:100%;max-width:1100px;padding:36px;border-radius:20px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 20px 50px rgba(2,6,23,0.7);text-align:center}

    h1{font-size:clamp(28px,6vw,68px);margin:0;line-height:1.02;text-transform:uppercase;letter-spacing:1px}
    .line1{color:var(--accent);text-shadow:0 6px 18px rgba(255,180,100,0.12)}
    .line2{margin-top:6px;font-size:clamp(18px,3vw,28px);color:#f8e9f1}

    /* big message */
    .big{font-weight:800;display:block;margin-top:18px;font-size:clamp(20px,3.8vw,44px)}
    .heart{display:inline-block;margin-left:10px;transform-origin:center center;animation:beat 1.2s infinite}
    @keyframes beat{0%{transform:scale(1)}40%{transform:scale(1.14)}60%{transform:scale(0.98)}100%{transform:scale(1)}}

    /* Decorative fireworks canvas */
    #fireCanvas{position:fixed;inset:0;z-index:3;pointer-events:none}

    /* Bottom controls */
    .controls{display:flex;gap:12px;justify-content:center;margin-top:22px}
    .btn{background:transparent;border:2px solid rgba(255,255,255,0.12);padding:10px 16px;border-radius:12px;color:inherit;cursor:pointer;font-weight:600}
    .btn:active{transform:translateY(1px)}

    /* floating confetti / hearts */
    .floating{position:fixed;inset:auto;z-index:4;pointer-events:none}
    .footer-note{margin-top:14px;color:#f0e6d3}

    /* mobile tweaks */
    @media (max-width:640px){.card{padding:20px}.controls{flex-wrap:wrap}}

    /* crackers SVG style */
    .cracker{width:46px;height:46px;margin:0 8px;display:inline-block;vertical-align:middle}

    /* shimmer text effect */
    .shimmer{background:linear-gradient(90deg, rgba(255,255,255,0.06), rgba(255,255,255,0.24), rgba(255,255,255,0.06));-webkit-background-clip:text;background-clip:text;color:transparent;animation:shine 3s linear infinite}
    @keyframes shine{0%{background-position:-200px 0}100%{background-position:200px 0}}
  </style>
</head>
<body>
  <div class="sky" aria-hidden>
    <div class="stars"></div>
    <div class="clouds"></div>
  </div>

  <canvas id="fireCanvas"></canvas>

  <div class="stage">
    <div class="card" role="main">
      <h1 class="line1">Happy Diwali</h1>
      <div class="line2 shimmer">Meri <strong>Anjali</strong> ‚ù§Ô∏è</div>

      <div class="big">I Love You <span class="heart">ü§ç</span></div>

      <div style="margin-top:18px">
        <!-- crackers icons -->
        <svg class="cracker" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M8 56L56 8" stroke="#ffb86b" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/><path d="M14 8l6 6" stroke="#fff" stroke-opacity="0.12" stroke-width="2" stroke-linecap="round"/></svg>
        <svg class="cracker" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="18" stroke="#ff7ab6" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/></svg>
        <svg class="cracker" viewBox="0 0 64 64" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6 58L58 6" stroke="#ffd36b" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </div>

      <div class="controls">
        <button class="btn" id="fireToggle">Toggle Fireworks</button>
        <button class="btn" id="musicToggle">Play Music</button>
        <button class="btn" id="downloadBtn">Download as HTML</button>
      </div>

      <p class="footer-note">Tap anywhere to send a little heart ‚Äî and press <strong>P</strong> to personalize name.</p>
    </div>
  </div>

  <script>
    /* --------- Responsive canvas sizing --------- */
    const canvas = document.getElementById('fireCanvas'); const ctx = canvas.getContext('2d');
    function resize(){canvas.width = innerWidth; canvas.height = innerHeight}
    addEventListener('resize', resize); resize();

    /* --------- Simple fireworks / cracker bursts --------- */
    let fireworksOn = true; let particles = [];
    function rand(min,max){return Math.random()*(max-min)+min}
    class Particle{constructor(x,y,dx,dy,life,color){this.x=x;this.y=y;this.dx=dx;this.dy=dy;this.life=life;this.max=life;this.color=color}
      update(dt){this.x+=this.dx*dt;this.y+=this.dy*dt;this.dy+=0.06*dt;this.life-=dt}
      draw(ctx){const alpha = Math.max(this.life/this.max,0);
        ctx.globalAlpha = alpha; ctx.fillStyle=this.color; ctx.beginPath(); ctx.arc(this.x,this.y,Math.max(1,2*alpha),0,Math.PI*2); ctx.fill(); ctx.globalAlpha=1}
    }
    function spawnBurst(x,y,colors){const total=16+Math.floor(rand(6,24)); for(let i=0;i<total;i++){const a=rand(0,Math.PI*2);const s=rand(1,6);const dx=Math.cos(a)*s;const dy=Math.sin(a)*s;const c=colors[Math.floor(rand(0,colors.length))];particles.push(new Particle(x,y,dx,dy,rand(0.8,1.6),c))}}
    function loop(ts){ctx.clearRect(0,0,canvas.width,canvas.height);
      const dt = 0.016; // fixed-ish
      if(fireworksOn && Math.random()<0.02){spawnBurst(rand(0,canvas.width),rand(0,canvas.height*0.6), ['#ffcf6b','#ff7ab6','#9be6ff','#ffd36b'])}
      for(let i=particles.length-1;i>=0;i--){const p=particles[i];p.update(dt); if(p.life<=0)particles.splice(i,1); else p.draw(ctx)}
      requestAnimationFrame(loop)
    }
    requestAnimationFrame(loop)

    // toggle via button
    document.getElementById('fireToggle').addEventListener('click',()=>{fireworksOn=!fireworksOn;document.getElementById('fireToggle').textContent = fireworksOn? 'Stop Fireworks' : 'Toggle Fireworks'})

    /* --------- heart emitter on click --------- */
    document.body.addEventListener('click',(e)=>{const cx=e.clientX;const cy=e.clientY;for(let i=0;i<12;i++){const a=rand(0,Math.PI*2);particles.push(new Particle(cx,cy,Math.cos(a)*rand(0.5,4),Math.sin(a)*rand(0.5,4)-1,rand(0.6,1.2),'#ff6b9a'))}})

    /* --------- gentle confetti spawn for initial effect --------- */
    for(let i=0;i<60;i++){setTimeout(()=>spawnBurst(rand(0,canvas.width),rand(canvas.height*0.3,canvas.height*0.7),['#ffd36b','#ff7ab6','#9be6ff']), i*60)}

    /* --------- music via WebAudio (short romantic melody) --------- */
    const AudioCtx = window.AudioContext || window.webkitAudioContext; const audioCtx = new AudioCtx();
    function playMelody(){if(audioCtx.state==='suspended')audioCtx.resume(); const notes=[440,554.37,659.25,880,659.25,554.37,440]; let t=audioCtx.currentTime; notes.forEach((f,i)=>{const o=audioCtx.createOscillator();const g=audioCtx.createGain();o.type='sine';o.frequency.value=f;g.gain.value=0.02; o.connect(g); g.connect(audioCtx.destination); o.start(t + i*0.35); o.stop(t + i*0.35 + 0.32)})}
    let musicOn=false; document.getElementById('musicToggle').addEventListener('click',()=>{musicOn=!musicOn; if(musicOn){playMelody(); document.getElementById('musicToggle').textContent='Stop Music'}else{document.getElementById('musicToggle').textContent='Play Music'}})

    /* --------- Download as HTML (generate file and trigger download) --------- */
    document.getElementById('downloadBtn').addEventListener('click',()=>{
      const blob = new Blob([document.documentElement.outerHTML],{type:'text/html;charset=utf-8'});
      const url = URL.createObjectURL(blob); const a=document.createElement('a'); a.href=url; a.download='Diwali-For-Anjali.html'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    })

    /* --------- Personalize with P key --------- */
    document.addEventListener('keydown', (e)=>{ if(e.key.toLowerCase()==='p'){const n=prompt('Anjali ke liye name set karo:'); if(n){document.querySelector('.line2 strong').textContent = n} } })
  </script>
</body>
</html>